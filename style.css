:root {
    --primary-red: #d42426;
    --primary-green: #2f5a2d;
    --gold: #f8b229;
    --snow-white: #f0f4f8;
    --dark-bg: #1a1a1a;
    --door-bg: #8b0000;
    --door-border: #5c0000;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    background: url('https://images.unsplash.com/photo-1546593064-053d59b5bc59?q=80&w=2070&auto=format&fit=crop') no-repeat center center fixed;
    background-size: cover;
    color: #333;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow-x: hidden;
}

.calendar-container {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px);
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    max-width: 1200px;
    width: 90%;
    margin: 2rem auto;
    z-index: 10;
    position: relative;
}

header h1 {
    font-family: 'Mountains of Christmas', cursive;
    font-size: 4rem;
    color: var(--primary-red);
    text-align: center;
    margin-bottom: 2rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.calendar-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    padding: 2rem;
}

/* Door Styles */
.door-container {
    position: relative;
    width: 140px;
    /* Fixed width for flex items */
    height: 140px;
    perspective: 1000px;
    cursor: pointer;
    transition: transform 0.3s ease;
    /* Smooth hover effect */
}

.door-container:hover {
    z-index: 10;
    /* Bring to front on hover */
    transform: scale(1.05) !important;
    /* Override inline rotation slightly on hover, or add to it? 
                                          Actually !important overrides the inline rotation which removes the randomness.
                                          Better to not use !important and just let it be. 
                                          But we want a hover effect. 
                                          Let's skip the scale transform on hover to avoid conflict with inline styles, 
                                          or use a child element for the scale. 
                                          For now, let's just remove the hover transform or keep it simple. */
}

.door {
    position: absolute;
    width: 100%;
    height: 100%;
    background: var(--door-bg);
    border: 2px solid var(--gold);
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Mountains of Christmas', cursive;
    font-size: 3rem;
    color: var(--gold);
    font-weight: bold;
    transform-origin: left;
    transition: transform 0.6s cubic-bezier(0.4, 2.08, 0.55, 0.44);
    z-index: 2;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

.door::before {
    content: '';
    position: absolute;
    top: 5px;
    bottom: 5px;
    left: 5px;
    right: 5px;
    border: 1px dashed rgba(248, 178, 41, 0.3);
    border-radius: 8px;
}

.door-content {
    position: absolute;
    width: 100%;
    height: 100%;
    background: white;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1;
    overflow: hidden;
}

.door-content img {
    width: 80%;
    height: 80%;
    object-fit: contain;
    opacity: 0.5;
}

/* States */
.door-container.open .door {
    transform: rotateY(-110deg);
}

.door-container.locked {
    cursor: not-allowed;
}

.door-container.locked .door {
    filter: grayscale(0.5);
}

/* Shake Animation for locked doors */
@keyframes shake {
    0% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-5px) rotateY(0);
    }

    50% {
        transform: translateX(5px) rotateY(0);
    }

    75% {
        transform: translateX(-5px) rotateY(0);
    }

    100% {
        transform: translateX(0);
    }
}

.shake .door {
    animation: shake 0.4s ease-in-out;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    z-index: 100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
}

.modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 2rem;
    border: 4px solid var(--gold);
    border-radius: 15px;
    width: 80%;
    max-width: 600px;
    position: relative;
    text-align: center;
    animation: slideDown 0.5s ease-out;
}

@keyframes slideDown {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.close-button {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s;
}

.close-button:hover {
    color: var(--primary-red);
}

.modal-image {
    max-width: 100%;
    max-height: 300px;
    border-radius: 10px;
    margin: 1rem 0;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.modal-phrase {
    font-size: 1.5rem;
    font-family: 'Mountains of Christmas', cursive;
    color: var(--primary-green);
    line-height: 1.4;
}

/* Snow Effect (Simple CSS) */
.snow-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    background-image:
        radial-gradient(4px 4px at 100px 50px, #fff, transparent),
        radial-gradient(6px 6px at 200px 150px, #fff, transparent),
        radial-gradient(3px 3px at 300px 250px, #fff, transparent);
    background-size: 650px 650px;
    animation: snow 10s linear infinite;
    opacity: 0.3;
}

@keyframes snow {
    0% {
        background-position: 0 0, 0 0, 0 0;
    }

    100% {
        background-position: 500px 1000px, 400px 400px, 300px 300px;
    }
}

/* Responsive */
@media (max-width: 600px) {
    header h1 {
        font-size: 2.5rem;
    }

    .calendar-grid {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    }

    .door {
        font-size: 2rem;
    }
}